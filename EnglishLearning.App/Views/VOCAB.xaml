<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:zoft="http://zoft.MauiExtensions/Controls"
             x:Class="EnglishLearning.App.Views.VOCAB"             
             Title="生词本">

    <!--<Shell.TitleView>
        <HorizontalStackLayout VerticalOptions="Fill"  >
            <Label x:Name="lblTitle" Text="生词本" TextColor="White"
                HorizontalTextAlignment="Start"
                VerticalTextAlignment="Center"
                VerticalOptions="Center"
                HeightRequest="30"
                FontSize="16" />
        </HorizontalStackLayout>
    </Shell.TitleView>-->

    <ContentPage.ToolbarItems>
        <ToolbarItem x:Name="tbiRefresh" Text="" Clicked="tbiRefresh_Clicked">
            <ToolbarItem.IconImageSource>
                <FontImageSource FontFamily="FASolid" Glyph="{StaticResource refresh}"  Color="White" Size="20"></FontImageSource>
            </ToolbarItem.IconImageSource>
        </ToolbarItem>      
        <ToolbarItem x:Name="tbiManage" Text="" Clicked="tbiManage_Clicked">
            <ToolbarItem.IconImageSource>
                <FontImageSource FontFamily="FASolid" Glyph="{StaticResource setting}"  Color="White" Size="20"></FontImageSource>
            </ToolbarItem.IconImageSource>
        </ToolbarItem>
        <ToolbarItem x:Name="tbiSortByLetterAsc" Order="Secondary" Text="按字母升序" Clicked="tbiSortByLetterAsc_Clicked"></ToolbarItem>
        <ToolbarItem x:Name="tbiSortByLetterDesc" Order="Secondary" Text="按字母降序" Clicked="tbiSortByLetterDesc_Clicked"></ToolbarItem>
        <ToolbarItem x:Name="tbiSortByCreateTimeAsc" Order="Secondary" Text="按加入时间升序" Clicked="tbiSortByCreateTimeAsc_Clicked"></ToolbarItem>
        <ToolbarItem x:Name="tbiSortByCreateTimeDesc" Order="Secondary" Text="按加入时间降序" Clicked="tbiSortByCreateTimeDesc_Clicked"></ToolbarItem>
    </ContentPage.ToolbarItems>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition  Width="9*" />
            <ColumnDefinition  Width="1*"/>
        </Grid.ColumnDefinitions>

        <zoft:AutoCompleteEntry x:Name="txtKeyword" Placeholder="请输入要查找的单词或短语"                          
               TextMemberPath="Name"
               DisplayMemberPath="Name"                         
               ClearButtonVisibility="WhileEditing"
               Completed="txtKeyword_Completed"
               TextChanged="AutoCompleteEntry_TextChanged"  
               SuggestionChosen="txtKeyword_SuggestionChosen"                                      
               HeightRequest="50"/>

        <ImageButton  x:Name="btnSearch"  Grid.Column="1"  WidthRequest="20" HeightRequest="20"  Clicked="OnSearchButtonClicked">
            <ImageButton.Source>
                <FontImageSource   FontFamily="FASolid" Glyph="{StaticResource search}"  Color="DodgerBlue" Size="16"/>
            </ImageButton.Source>
        </ImageButton>

        <CollectionView x:Name="lvVOCAB" Grid.Row="1"   SelectionMode="None" EmptyView="暂无数据" Margin="3,0"  >          
            <CollectionView.ItemTemplate>
                <DataTemplate>

                    <SwipeView>
                        <SwipeView.RightItems>
                            <SwipeItems>
                                <SwipeItem Text="移除" BackgroundColor="Red"  Clicked="SwipeItemRemove_Clicked"></SwipeItem>
                            </SwipeItems>
                        </SwipeView.RightItems>

                        <Grid>
                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped" NumberOfTapsRequired="1" />
                            </Grid.GestureRecognizers>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>

                            <Label Text="{Binding Name}"  HorizontalTextAlignment="Start" FontSize="14" FontAttributes="Bold" Padding="2,5" />

                            <Label Text="{Binding Meaning}" Grid.Column="1" HorizontalTextAlignment="End" TextColor="Gray" FontSize="14" Margin="10,5" LineBreakMode="TailTruncation" MaxLines="1" />
                        </Grid>
                        
                    </SwipeView>                                         
                         
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
   
</ContentPage>